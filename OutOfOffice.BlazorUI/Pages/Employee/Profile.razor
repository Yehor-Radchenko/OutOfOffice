@page "/profile"
@using OutOfOffice.BlazorUI.Components.Profile
@using OutOfOffice.BlazorUI.Services.Contracts
@using OutOfOffice.Common.ViewModels.Employee
@inject IEmployeeService EmployeeService

<MudGrid>
    <MudItem xs="12" md="4">
        <ProfilePhoto ViewModel="ViewModel" />
    </MudItem>
    <MudItem xs="12" md="8">
        <ProfileDetails ViewModel="ViewModel" />
    </MudItem>
    <MudItem xs="12">
        <ProjectsTable ViewModel="ViewModel" />
    </MudItem>
    <MudItem xs="12">
        <SubordinatesTable ViewModel="ViewModel" />
    </MudItem>
    <MudItem xs="12">
        <LeaveRequestTable ViewModel="ViewModel" />
    </MudItem>
</MudGrid>

@code {
    private FullEmployeeViewModel ViewModel { get; set; } = new FullEmployeeViewModel();

    protected override async Task OnInitializedAsync()
    {
        ViewModel = await EmployeeService.GetFullInfoAboutAuthenticatedEmployeeAsync();
    }
}
